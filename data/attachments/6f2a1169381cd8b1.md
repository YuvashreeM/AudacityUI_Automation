# Test info

- Name: @smoke Search with invalid data
- Location: /home/runner/work/AudacityUI_Automation/AudacityUI_Automation/tests/search-input.spec.ts:35:5

# Error details

```
Error: expect(received).toBe(expected) // Object.is equality

Expected: undefined
Received: "Data Analyst"
    at /home/runner/work/AudacityUI_Automation/AudacityUI_Automation/pages/CatalogPage.ts:132:56
```

# Page snapshot

```yaml
- banner:
  - link "Udacity part of Accenture logo":
    - /url: /
    - img "Udacity part of Accenture logo"
  - navigation:
    - button "Learn":
      - text: Learn
      - img
    - link "Catalog":
      - /url: https://www.udacity.com/catalog
    - link "Individuals":
      - /url: https://www.udacity.com/experience
    - button "Business":
      - text: Business
      - img
    - link "Government":
      - /url: https://www.udacity.com/government/overview
  - button "Search"
  - img
  - searchbox "Search input": NonExistentRandomTerm1234
  - button "Cancel"
  - link "Log In":
    - /url: https://auth.udacity.com/sign-in?next=https://www.udacity.com/catalog?sort=relevance&searchValue=NonExistentRandomTerm1234
  - link "Join for Free":
    - /url: https://auth.udacity.com/sign-up?next=https://www.udacity.com/catalog?sort=relevance&searchValue=NonExistentRandomTerm1234
- alert:
  - paragraph:
    - strong: 55% OFF!
    - text: Biggest Sale Of The Year. Use Code
    - strong:
      - link "SUMMER55 (opens in a new tab)":
        - /url: /checkout/individual/4month/credit-card?coupon=SUMMER55
      - text: .
    - text: Donâ€™t Miss Out!
  - button "Close"
- main:
  - paragraph: Bootcamp level quality, on your own time, at a fraction of the cost.
  - article:
    - heading "Unlimited Learning" [level=3]
    - paragraph: Access our entire catalog of 80+ Nanodegree programs, 350+ courses, and 2,500+ skills.
  - article:
    - heading "Exceptional Course Quality" [level=3]
    - paragraph: Industry leading programs designed with the world's most innovative tech companies.
  - article:
    - heading "Real-World Projects" [level=3]
    - paragraph: Hands-on projects that put your skills into practice and prepare you for what's next.
  - article:
    - heading "Expert Feedback and Advice" [level=3]
    - paragraph: 24/7 access to industry experts who are there to support you every step of the way.
  - button "Previous Value Proposition"
  - button "Next Value Proposition"
  - link "All Programs":
    - /url: /catalog
    - img
    - text: All Programs
  - heading "Search results for \"NonExistentRandomTerm1234\"" [level=1]
  - text: Sort by Relevance
  - combobox
  - button "Price"
  - button "School"
  - button "Skill"
  - button "Level"
  - button "Duration"
  - button "Type"
  - img "Rated undefined out of 5":
    - img
    - img
    - img
    - img
    - img
  - img "Rated undefined out of 5":
    - img
    - img
    - img
    - img
    - img
  - img "Rated undefined out of 5":
    - img
    - img
    - img
    - img
    - img
  - img "Rated undefined out of 5":
    - img
    - img
    - img
    - img
    - img
  - img "Rated undefined out of 5":
    - img
    - img
    - img
    - img
    - img
  - img "Rated undefined out of 5":
    - img
    - img
    - img
    - img
    - img
  - img "Rated undefined out of 5":
    - img
    - img
    - img
    - img
    - img
  - img "Rated undefined out of 5":
    - img
    - img
    - img
    - img
    - img
  - img "Rated undefined out of 5":
    - img
    - img
    - img
    - img
    - img
  - img "Rated undefined out of 5":
    - img
    - img
    - img
    - img
    - img
  - img "Rated undefined out of 5":
    - img
    - img
    - img
    - img
    - img
  - img "Rated undefined out of 5":
    - img
    - img
    - img
    - img
    - img
  - img "Rated undefined out of 5":
    - img
    - img
    - img
    - img
    - img
  - img "Rated undefined out of 5":
    - img
    - img
    - img
    - img
    - img
  - img "Rated undefined out of 5":
    - img
    - img
    - img
    - img
    - img
  - img "Rated undefined out of 5":
    - img
    - img
    - img
    - img
    - img
  - img "Rated undefined out of 5":
    - img
    - img
    - img
    - img
    - img
  - img "Rated undefined out of 5":
    - img
    - img
    - img
    - img
    - img
  - img "Rated undefined out of 5":
    - img
    - img
    - img
    - img
    - img
  - img "Rated undefined out of 5":
    - img
    - img
    - img
    - img
    - img
  - img "Rated undefined out of 5":
    - img
    - img
    - img
    - img
    - img
  - img "Rated undefined out of 5":
    - img
    - img
    - img
    - img
    - img
  - img "Rated undefined out of 5":
    - img
    - img
    - img
    - img
    - img
  - img "Rated undefined out of 5":
    - img
    - img
    - img
    - img
    - img
  - heading "No Results Found" [level=2]
  - paragraph: We could not find any results matching the provided filters.
  - heading "Discover our Skill Collections" [level=2]
  - link "Machine Learning Courses":
    - /url: /catalog/machine-learning-courses
    - paragraph: Machine Learning Courses
  - link "Generative AI Courses":
    - /url: /catalog/generative-ai-courses
    - paragraph: Generative AI Courses
  - link "Python Courses":
    - /url: /catalog/python-courses
    - paragraph: Python Courses
  - link "Product Management Courses":
    - /url: /catalog/product-management-courses
    - paragraph: Product Management Courses
  - link "SQL Courses":
    - /url: /catalog/sql-courses
    - paragraph: SQL Courses
  - link "Discovery Courses":
    - /url: /catalog/discovery-courses
    - paragraph: Discovery Courses
  - link "Google Cloud Digital Leader":
    - /url: /catalog/google-cloud-digital-leader
    - paragraph: Google Cloud Digital Leader
  - link "C++ Courses":
    - /url: /catalog/c-plus-plus-courses
    - paragraph: C++ Courses
  - link "JavaScript Courses":
    - /url: /catalog/javascript-courses
    - paragraph: JavaScript Courses
  - link "Data Engineering Courses":
    - /url: /catalog/data-engineering-courses
    - paragraph: Data Engineering Courses
  - link "Neural Networks and Deep Learning Courses":
    - /url: /catalog/neural-networks-courses
    - paragraph: Neural Networks and Deep Learning Courses
  - link "Fluency Courses":
    - /url: /catalog/fluency-courses
    - paragraph: Fluency Courses
- contentinfo:
  - link "Link to home page":
    - /url: https://www.udacity.com/
    - img "Udacity Accenture logo"
  - heading "Company" [level=2]
  - navigation "Navigation for Company related links.":
    - link "About Us":
      - /url: https://www.udacity.com/about-us
    - link "Why Udacity?":
      - /url: https://www.udacity.com/experience
    - link "Blog":
      - /url: https://udacity.com/blog
    - link "In the News":
      - /url: https://www.udacity.com/news
    - link "Jobs at Udacity":
      - /url: https://udacity.com/jobs
    - link "Become a Mentor":
      - /url: https://www.udacity.com/become-a-mentor
    - link "Partner with Udacity":
      - /url: https://www.udacity.com/partnerships
  - heading "Resources" [level=2]
  - navigation "Navigation for Resources related links.":
    - link "Catalog":
      - /url: https://www.udacity.com/catalog
    - link "Career Outcomes":
      - /url: https://www.udacity.com/career-outcomes
    - link "Help and FAQ":
      - /url: https://support.udacity.com/hc/en-us
    - link "Scholarships":
      - /url: https://www.udacity.com/scholarships
    - link "Resource Center":
      - /url: https://www.udacity.com/resource-center
  - heading "Udacity Schools" [level=2]
  - navigation "Navigation for Udacity Schools related links.":
    - link "School of Artificial Intelligence":
      - /url: https://www.udacity.com/school/artificial-intelligence
    - link "School of Autonomous Systems":
      - /url: https://www.udacity.com/school/autonomous-systems
    - link "School of Business":
      - /url: https://www.udacity.com/school/business
    - link "School of Cloud Computing":
      - /url: https://www.udacity.com/school/cloud-computing
    - link "School of Cybersecurity":
      - /url: https://www.udacity.com/school/cybersecurity
    - link "School of Data Science":
      - /url: https://www.udacity.com/school/data-science
    - link "School of Executive Leadership":
      - /url: https://www.udacity.com/school/executive-leadership
    - link "School of Product Management":
      - /url: https://www.udacity.com/school/product-management
    - link "School of Programming":
      - /url: https://www.udacity.com/school/programming
  - heading "Featured Programs" [level=2]
  - navigation "Navigation for Featured Programs related links.":
    - link "Business Analytics":
      - /url: https://www.udacity.com/course/business-analytics-nanodegree--nd098
    - link "SQL":
      - /url: https://www.udacity.com/course/learn-sql--nd072
    - link "AWS Cloud Architect":
      - /url: https://www.udacity.com/course/aws-cloud-architect-nanodegree--nd063
    - link "Data Analyst":
      - /url: https://www.udacity.com/course/data-analyst-nanodegree--nd002
    - link "Intro to Programming":
      - /url: https://www.udacity.com/course/intro-to-programming-nanodegree--nd000
    - link "Digital Marketing":
      - /url: https://www.udacity.com/course/digital-marketing-nanodegree--nd018
    - link "Self Driving Car Engineer":
      - /url: https://www.udacity.com/course/self-driving-car-engineer-nanodegree--nd0013
  - heading "Only at Udacity" [level=2]
  - navigation "Navigation for Only at Udacity related links.":
    - link "Artificial Intelligence":
      - /url: https://www.udacity.com/course/ai-artificial-intelligence-nanodegree--nd898
    - link "Deep Learning":
      - /url: https://www.udacity.com/course/deep-learning-nanodegree--nd101
    - link "Digital Marketing":
      - /url: https://www.udacity.com/course/digital-marketing-nanodegree--nd018
    - link "Flying Car and Autonomous Flight Engineer":
      - /url: https://www.udacity.com/course/flying-car-nanodegree--nd787
    - link "Intro to Self-Driving Cars":
      - /url: https://www.udacity.com/course/intro-to-self-driving-cars--nd113
    - link "Machine Learning Engineer":
      - /url: https://www.udacity.com/course/aws-machine-learning-engineer-nanodegree--nd189
    - link "Robotics Software Engineer":
      - /url: https://www.udacity.com/course/robotics-software-engineer--nd209
  - group:
    - text: Submit your email to stay updated on the latest in technology
    - button "Sign up Terms and Conditions."
    - textbox "Submit your email to stay updated on the latest in technology"
    - button "Subscribe To Newsletter"
  - list:
    - listitem:
      - link "Facebook":
        - /url: https://www.facebook.com/Udacity
        - img "Facebook"
    - listitem:
      - link "Twitter":
        - /url: https://twitter.com/udacity
        - img "Twitter"
    - listitem:
      - link "LinkedIn":
        - /url: https://www.linkedin.com/school/udacity/
        - img "LinkedIn"
    - listitem:
      - link "Instagram":
        - /url: https://www.instagram.com/udacity/
        - img "Instagram"
  - text: Â© 2011-2025 Udacity, Inc. "Nanodegree" is a registered trademark of Udacity. Â© 2011-2025 Udacity, Inc. We use cookies and other data collection technologies to provide the best experience for our customers.
  - navigation "Legal & privacy related links.":
    - link "Legal & Privacy":
      - /url: https://www.udacity.com/legal
    - link "Site Map":
      - /url: https://www.udacity.com/sitemap
- alert: Learn the Latest Tech Skills; Advance Your Career | Udacity
- region "Notifications-top"
- region "Notifications-top-left"
- region "Notifications-top-right"
- region "Notifications-bottom-left"
- region "Notifications-bottom"
- region "Notifications-bottom-right"
- img
```

# Test source

```ts
   32 |             await this.page.locator(catalogSelectors.skill).isVisible(); // Ensure the network is idle before proceeding
   33 |             // Click on the skill filter button
   34 |             await this.page.locator(catalogSelectors.skill).click();
   35 |             await this.page.locator(catalogSelectors.skillSearch).click(); // Click on the skill search input to focus it
   36 |             await this.page.waitForLoadState('load') // Ensure the page is fully loaded before interacting with elements
   37 |             // Wait for the skill filter options to be visible
   38 |             await this.page.locator(catalogSelectors.skillSearch).type(input); // Fill the skill search input with the search term
   39 |             // Click the search button within the skill filter
   40 |             await this.page.keyboard.press('Enter');
   41 |             // Verify the skill filter is getting displayed
   42 |             await this.page.locator(catalogSelectors.skillFiltered).waitFor({ state: 'visible' }); // Wait for the skill filter to be visible
   43 |             await expect(this.page.locator(catalogSelectors.skillFiltered)).toContainText(input); // Verify the skill filter contains the input text
   44 |             await expect(this.page.url()).toContain(input);
   45 |         });
   46 |     }
   47 |
   48 |     async sortByRating(rating: string) {
   49 |         await step(`Sort by Rating: ${rating}`, async () => {
   50 |             // 1. Disable auto-scroll and smooth scrolling
   51 |             await this.page.locator(catalogSelectors.sortBy).click({ 
   52 |             noWaitAfter: true,
   53 |             force: true 
   54 |         });
   55 |         
   56 |         // Wait for dropdown to appear
   57 |         await this.page.waitForSelector(catalogSelectors.hightlyRated);
   58 |         if(rating === 'Highly Rated') {
   59 |             await this.page.locator(catalogSelectors.hightlyRated).click({ 
   60 |                 noWaitAfter: true,
   61 |                 force: true 
   62 |             });
   63 |             await this.page.waitForTimeout(1000); // Wait for the filter to apply
   64 |             await expect(this.page.url()).toContain('highest-rated');
   65 |         }
   66 |         
   67 |         // Manual wait for results
   68 |         await this.page.waitForLoadState('load');
   69 |         });
   70 |     }
   71 |
   72 |     async levelFilter() {
   73 |         await step('Level Filter', async () => {
   74 |             // Click on the level filter button
   75 |             await this.page.locator(catalogSelectors.level).click();
   76 |             // click on the intermediate level checkbox
   77 |             await this.page.locator(catalogSelectors.intermediateLevel).click (); 
   78 |             // Verify the level filter is getting displayed
   79 |             await this.page.locator(catalogSelectors.intermediateLevelFiltered).scrollIntoViewIfNeeded(); // Wait for the level filter to be visible
   80 |             await this.page.locator(catalogSelectors.intermediateLevelFiltered).waitFor({ state: 'visible' }); // Wait for the level filter to be visible
   81 |             await expect(this.page.locator(catalogSelectors.intermediateLevelFiltered)).toContainText(catalogData.intermediateLevel);
   82 |             //wait till the filter is applied
   83 |             await this.page.waitForTimeout(1000);
   84 |             //verify the level filter is displayed in the url
   85 |             await expect(this.page.url()).toContain(catalogData.intermediateLevel);
   86 |         });
   87 |     }
   88 |
   89 |     async searchResults(searchInput: string, skillValue, levelValue, apiClient: ApiClient) {
   90 |         await step('Search Results', async () => {
   91 |             const searchResultsLocator = this.page.locator(catalogSelectors.ResultsCount);
   92 |             const noResultsText = this.page.locator(catalogSelectors.noResults);
   93 |             // Store the UI results in the order they appear
   94 |             const uiResultsArray = await searchResultsLocator.allTextContents();
   95 |             const uiResultsOrdered = uiResultsArray.map(text => text.trim());
   96 |             console.log('ui order:', uiResultsOrdered);
   97 |             // Call the API client to get the API response
   98 |             const apiResponse = await apiClient.searchCatalog(searchInput, skillValue, levelValue);
   99 |             expect(apiResponse.status()).toBe(200);
  100 |             const responseData = await apiResponse.json();
  101 |             console.log("API Response Data: ", responseData);
  102 |             const apiResultsCount = responseData.searchResult?.hits?.length || 0;
  103 |
  104 |             const flag = await noResultsText.isVisible()
  105 |
  106 |             if (flag) {
  107 |                 // No results found in UI
  108 |                 await expect(noResultsText).toBeVisible();
  109 |                 await expect(noResultsText).toContainText(catalogData.noResultsText);
  110 |                 // Validate API also returns no results
  111 |                 await step('Validate API results count', async () => {
  112 |                 expect(apiResultsCount).toBe(0);
  113 |                 });
  114 |                 
  115 |             } else {
  116 |                 // Results count is displayed in UI
  117 |                 const uiResultsArray = await searchResultsLocator.allTextContents();
  118 |                 const uiResultsCount = uiResultsArray.length;
  119 |                 //get the text value from the locator
  120 |                 console.log("ui text:", uiResultsArray);
  121 |                 console.log("ui result count:", uiResultsCount);
  122 |                 // Validate API and UI results count match
  123 |                 const uniqueTitles = [
  124 |                     ...new Set(
  125 |                         responseData.searchResult.hits
  126 |                         .map((hit: any) => hit._highlightResult?.title?.value)
  127 |                         .filter((title: string | undefined) => title !== undefined)
  128 |                     )
  129 |                 ];  
  130 |                 console.log("Unique Titles from API: ", uniqueTitles);
  131 |                 for (let i = 0; i < uiResultsOrdered.length; i++) {
> 132 |                     expect(uiResultsOrdered[i].trim()).toBe(uniqueTitles[i]);
      |                                                        ^ Error: expect(received).toBe(expected) // Object.is equality
  133 |                 }
  134 |                 // Validate order matches exactly
  135 |                 const uiResultsTrimmed = uiResultsOrdered.map(text => text.trim());
  136 |                 if (JSON.stringify(uiResultsTrimmed) !== JSON.stringify(uniqueTitles)) {
  137 |                     throw new Error('Order of UI results does not match API results');
  138 |                 }
  139 |                 expect(uniqueTitles.length).toBe(uiResultsCount);
  140 |             }
  141 |         });
  142 |     }
  143 |
  144 |     
  145 | }
```